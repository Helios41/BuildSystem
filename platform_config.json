{
   "languages":
   {
      "C":
      {
         "platforms":
         [
            "Linux", ["X86_64", "X86"]
         ],
         "host": ["Linux", "X86_64"],
         "sources": [ ".c" ],
         "types":
         {
            "executable": 
            {
               "endings": ".exe",
               "commands":
               [  
                  "cd [BUILD_DIRECTORY]",
                  {
                     "if": "ARCH=X86",
                     "then": 
		               {
			               "if": "OPT=true",
			               "then": "gcc -m32 -O3 -o [PROJECT_NAME].exe [SOURCES] [DEPENDENCIES]",
			               "else": "gcc -m32 -O0 -o [PROJECT_NAME].exe [SOURCES] [DEPENDENCIES]"
		               }
                  },
                  {
                     "if": "ARCH=X86_64",
                     "then": 
		               {
			               "if": "OPT=true",
			               "then": "gcc -m64 -O3 -o [PROJECT_NAME].exe [SOURCES] [DEPENDENCIES]",
			               "else": "gcc -m64 -O0 -o [PROJECT_NAME].exe [SOURCES] [DEPENDENCIES]"
		               }
                  }
               ]
            },
            "dynamic": 
            {
               "endings": [".so"],
               "commands":
               [
                  "cd [BUILD_DIRECTORY]",
                  {
                     "if": "ARCH=X86",
                     "then":
                     {
                        "if": "OPT=true",
                        "then": "gcc -shared -m32 -O3 -o [PROJECT_NAME].so -fPIC [SOURCES] [DEPENDENCIES]",
                        "else": "gcc -shared -m32 -O0 -o [PROJECT_NAME].so -fPIC [SOURCES] [DEPENDENCIES]"
                     }
                  },
                  {
                     "if": "ARCH=X86_64",
                     "then":
                     {
                        "if": "OPT=true",
                        "then": "gcc -shared -m64 -O3 -o [PROJECT_NAME].so -fPIC [SOURCES] [DEPENDENCIES]",
                        "else": "gcc -shared -m64 -O0 -o [PROJECT_NAME].so -fPIC [SOURCES] [DEPENDENCIES]"
                     }
                  }
               ]
            },
            "static": 
            {
               "endings": ".a",
               "commands":
               [
                  "cd [BUILD_DIRECTORY]",
                  {
                     "if": "ARCH=X86_64",
                     "then":
                     {
                        "if": "OPT=true",
                        "then": "gcc -m64 -O3 -c [SOURCES]",
                        "else": "gcc -m64 -O0 -c [SOURCES]"
                     }
                  }, 
                  {
                     "if": "ARCH=X86",
                     "then":
                     {
                        "if": "OPT=true",
                        "then": "gcc -m32 -O3 -c [SOURCES]",
                        "else": "gcc -m32 -O0 -c [SOURCES]"
                     }
                  },
                  "ar rcs [PROJECT_NAME].a *.o"
               ]
            }
         }
      },
      "D":
      {
         "platforms": ["Linux", ["X86_64", "X86"]],
         "host": ["Linux", "X86_64"],
         "sources": [ ".d" ],
         "types":
         {
            "executable":
            {
               "endings": ".exe",
               "commands":
               [
                  "cd [BUILD_DIRECTORY]",
                  {
                     "if": "ARCH=X86",
                     "then": 
                     [
			               {
			                  "if": "OS=Windows",
			                  "then": "dmd2vars32"	
			               },
                        "dmd -m32 -of[PROJECT_NAME].exe [SOURCES]"
                     ]
                  },
                  {
                     "if": "ARCH=X86_64",
                     "then": 
                     [
			               {
			                  "if": "OS=Windows",
			                  "then": "dmd2vars64"	
			               },
                        "dmd -m64 -of[PROJECT_NAME].exe [SOURCES]"
                     ]
                  }
               ]
            }
         }
      }
   }
}
